# **FastAPI** Plugin

**Propan** может использоваться как полноценная часть **FastAPI**.

Для этого просто импортируйте нужный вам **PropanRouter** и объявите обработчик сообщений
с помощью декоратора `@event`. Этот декоратор аналогичен декоратору `@handle` у соответсвующих брокеров.

!!! tip
    При использовании таким образом **Propan** не использует собственную систему зависимостей, а интегрируется в **FastAPI**.
    Т.е. вы можете использовать `Depends`, `BackgroundTasks` и прочие инструменты **FastAPI** так, если бы это был обычный HTTP-endpoint.

    Обратите внимание, что в коде ниже используется `fastapi.Depends`, а не `propan.Depends`.

```python linenums="1" hl_lines="1 7 15 19 23"
{!> docs_src/integrations/fastapi_plugin_rabbit.py!}
```

При обработке сообщения из брокера все тело сообщения помещается одновременно и в `body`, и в `path` параметры запроса: вы можете достать получить к ним доступ
любым удобным для вас способом. Заголовок сообщения помещается в `headers`.

Также этот роутер может полноценно использоваться как `HttpRouter` (наследником которого он и является). Поэтому вы можете
объявлять с его помощью любые `get`, `post`, `put` и прочие HTTP методы. Как например, это сделано в строке **19**.

